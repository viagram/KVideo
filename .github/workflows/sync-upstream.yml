name: Sync upstream automatically

env:
  TZ: Asia/Shanghai

on:
  schedule:
    - cron: '0 */6 * * *'
  workflow_dispatch:             # 允许手动触发（推荐先手动跑一次测试）

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout my fork
        uses: actions/checkout@v4
        with:
          ref: main                # ← 改成你 fork 的主要分支（main/master 等）
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Sync with upstream
        uses: aormsby/Fork-Sync-With-Upstream-action@v3.4.1   # 建议用最新 patch 版 v3.4.1
        with:
          target_sync_branch: main                  # ← 改成你 fork 要同步的分支
          target_repo_token: ${{ secrets.GITHUB_TOKEN }}
          upstream_sync_repo: KuekHaoYang/KVideo            # ← 必须改！上游仓库，例如：vercel/next.js
          upstream_sync_branch: main                # ← 上游的分支名
          # upstream_repo_access_token: ${{ secrets.MY_PAT }}   # 只在私有上游时取消注释
          # test_mode: true                           # 第一次测试时打开，确认没问题再关
